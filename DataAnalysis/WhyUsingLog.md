# 为什么数据要取对数

原文： https://zhuanlan.zhihu.com/p/106232513



​        平时在一些数据处理中，经常会把原始数据取对数后再进一步处理。之所以这样做的原因，是<font color='red'>**基于对数函数在其定义域内是单调递增函数**</font>，取对数后，不会改变数据的相对关系。

​        取对数作用主要有：

1. 缩小数据的绝对值，方便计算。例如，每个数据项的值都很大，学多这样的值进行计算可能对超过常熟数据类型的取值范围。这时取对数，就把数值缩小了。例如，TF-IDF计算时，由于在大规模语料库中，很多词的频率是非常大的数字。

2. 取对数后，可以将乘法计算转化为加法计算

3. 某些情况下，**数据的整个值域会被划分为多个值域区间，在不同区间的差异带来的影响不同**。例如，中文分词的mmseg算法，计算语素自由度时就去了对数。这是因为：如果某个字的频率分别都是500，频率和为1000；另外两个字的频率分别为200和800，和也是1000。如果单纯比较频率和，则它们是相等的。但是取对数后，$$log500 = 2.69897$$， $$log200 = 2.30103$$，$$log800 = 2.90308$$。这时候前者对数后的和就是 $$ 2 \cdot log500 = 5.39794$$， 后者为 $$ log200 + log800 = 5.20411$$，显然前者的和更大，取前者。这个结果也符合现实中的意义：两个词频都是500，都更为常见；而后者有个频频只有200，应该不太常见。

   

   从log函数的图像可知，自变量$$x$$的值越小，函数值$$y$$的变化越快。用前面的例子，同样是相差了300，但是 $$log500 - log200 > log800 - log500 $$，因为前面一对比后面一对更小。

   也就是说，**对数值小的部分，差异的敏感程度比数值大的部分的差异敏感程度更高**。这也是符合生活常识的。例如对于价格，买个家电，如果价格相差几百元能够很大程度影响你的决定；但是买汽车相差几百元可能被忽略不计了。

4. <font color ='red'>**取对数之后不会改变数据的性质和相关关系**</font>，但压缩了变量的尺度。例如 $$800 \div 200 = 4$$，但 $$log800 \div log200 = 1.2616 $$，数据更加平稳，也消弱了模型的共线性、异方差性等。

5. 所得到的数据消除异方差问题

6. **在经济学中，常去自然对数在做回归**。例如回归方程 $$lny = a\cdot lnx + b$$，两边同时对$$x$$求导，得到 $$ \displaystyle \frac{1}{y} \cdot \frac{D_y}{D_x} = a \cdot \frac{1}{x}$$， $$\displaystyle b = \frac{D_y}{D_x} \cdot \frac{x}{y} = \frac{D_y \cdot x}{D_x \cdot y} = \frac{D_y}{y} \cdot \frac{D_x}{x} $$ ，正好符合弹性的定义。

*注：如果数据集中有负数，就不能取对数了。而且，取对数的一般是水瓶量，不是比例数据，比如变化率。*

